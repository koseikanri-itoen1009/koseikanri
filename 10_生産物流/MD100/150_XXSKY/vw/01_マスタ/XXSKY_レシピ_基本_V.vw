CREATE OR REPLACE VIEW APPS.XXSKY_レシピ_基本_V
(
 レシピ番号
,レシピ名称
,レシピ摘要
,バージョン
,削除フラグ
,削除フラグ名
,ステータス
,ステータス名
,所有者組織コード
,所有者組織名
,作成組織コード
,作成組織名
,フォーミュラ番号
,フォーミュラ名称
,フォーミュラ名称２
,フォーミュラ摘要
,フォーミュラ摘要２
,工順番号
,工順名
,調達区分
,調達区分名
,包装難度
,管理区分
,管理区分名
,品目コード
,品目名
,品目略称
,商品区分
,商品区分名
,品目区分
,品目区分名
,群コード
,レシピ使用
,妥当性ルール日付_自
,妥当性ルール日付_至
,最小数量
,最大数量
,標準数量
,単位
,作成者
,作成日
,最終更新者
,最終更新日
,最終更新ログイン
)
AS
SELECT  GRB.recipe_no                        --レシピ番号
       ,GRT.recipe_description               --レシピ名称
       ,GRT.recipe_description               --レシピ摘要
       ,GRB.recipe_version                   --バージョン
       ,GRB.delete_mark                      --削除フラグ
       ,CASE WHEN NVL( GRB.delete_mark, 0 ) <> 0 THEN '削除'
        END  delete_mark_name                --削除フラグ名
       ,GRB.recipe_status                    --ステータス
       ,GQST.meaning                         --ステータス名
       ,GRB.owner_orgn_code                  --所有者組織コード
       ,SOMT01.orgn_name                     --所有者組織名
       ,GRB.creation_orgn_code               --作成組織コード
       ,SOMT02.orgn_name                     --作成組織名
       ,FFMB.formula_no                      --フォーミュラ番号
       ,FFMT.formula_desc1                   --フォーミュラ名称
       ,FFMT.formula_desc2                   --フォーミュラ名称２
       ,FFMT.formula_desc1                   --フォーミュラ摘要
       ,FFMT.formula_desc2                   --フォーミュラ摘要２
       ,GROB.routing_no                      --工順番号
       ,GROT.routing_desc                    --工順名
       ,GRB.attribute1                       --調達区分
       ,FLV01.meaning
        tyoutatsu_kbn                        --調達区分名
       ,GRB.attribute2                       --包装難度
       ,GRB.attribute3                       --管理区分
       ,FLV02.meaning
        kanri_kbn                            --管理区分名
       ,XIMV.item_no                         --品目コード
       ,XIMV.item_name                       --品目名
       ,XIMV.item_short_name                 --品目略称
       ,XPCV.prod_class_code                 --商品区分
       ,XPCV.prod_class_name                 --商品区分名
       ,XICV.item_class_code                 --品目区分
       ,XICV.item_class_name                 --品目区分名
       ,XCCV.crowd_code                      --群コード
       ,GRVR.recipe_use                      --レシピ使用
       ,GRVR.start_date                      --妥当性ルール日付_自
       ,GRVR.end_date                        --妥当性ルール日付_至
       ,GRVR.min_qty                         --最小数量
       ,GRVR.max_qty                         --最大数量
       ,GRVR.std_qty                         --標準数量
       ,GRVR.item_um                         --単位
       ,FU_CB.user_name                      --作成者
       ,TO_CHAR( GRB.creation_date, 'YYYY/MM/DD HH24:MI:SS' )
                                             --作成日
       ,FU_LU.user_name                      --最終更新者
       ,TO_CHAR( GRB.last_update_date, 'YYYY/MM/DD HH24:MI:SS' )
                                             --最終更新日
       ,FU_LL.user_name                      --最終更新ログイン
  FROM  GMD_RECIPES_B               GRB      --レシピマスタ
       ,GMD_RECIPES_TL              GRT      --レシピマスタ(言語)
       ,GMD_QC_STATUS_TL            GQST     --
       ,SY_ORGN_MST_TL              SOMT01   --OPMプラントマスタ日本語(所有者組織名)
       ,SY_ORGN_MST_TL              SOMT02   --OPMプラントマスタ日本語(作成組織名)
       ,FM_FORM_MST_B               FFMB     --フォーミュラマスタ
       ,FM_FORM_MST_TL              FFMT     --フォーミュラマスタ(日本語)
       ,GMD_ROUTINGS_B              GROB     --工順マスタ
       ,GMD_ROUTINGS_TL             GROT     --工順マスタ(日本語)
       ,fnd_lookup_values           FLV01    --クイックコード(調達区分名)
       ,fnd_lookup_values           FLV02    --クイックコード(管理区分名)
       ,XXSKY_ITEM_MST_V            XIMV     --品目情報VIEW
       ,XXSKY_PROD_CLASS_V          XPCV     --商品区分情報VIEW
       ,XXSKY_ITEM_CLASS_V          XICV     --品目区分情報VIEW
       ,XXSKY_CROWD_CODE_V          XCCV     --郡コード情報VIEW
       ,GMD_RECIPE_VALIDITY_RULES   GRVR     --妥当性ルール
       ,fnd_user                    FU_CB    --ユーザーマスタ(created_by名称取得用)
       ,fnd_user                    FU_LU    --ユーザーマスタ(last_updated_by名称取得用)
       ,fnd_user                    FU_LL    --ユーザーマスタ(last_update_login名称取得用)
       ,fnd_logins                  FL_LL    --ログインマスタ(last_update_login名称取得用)
WHERE   GROB.routing_class     <> '70'       --『品目振替』対象外
  AND   GROB.routing_id         = GRB.routing_id
  AND   GRB.recipe_id           = GRVR.recipe_id
  AND   GRT.recipe_id(+)        = GRB.recipe_id
  AND   GRT.language            = 'JA'
  AND   GQST.status_code(+)     = GRB.recipe_status
  AND   GQST.language(+)        = 'JA'
  AND   GQST.entity_type(+)     = 'S'
  AND   SOMT01.orgn_code(+)     = GRB.owner_orgn_code
  AND   SOMT01.language         = 'JA'
  AND   SOMT02.orgn_code(+)     = GRB.creation_orgn_code
  AND   SOMT02.language         = 'JA'
  AND   FFMB.formula_id(+)      = GRB.formula_id
  AND   FFMT.formula_id(+)      = GRB.formula_id
  AND   FFMT.language           = 'JA'
  AND   GROT.routing_id(+)      = GRB.routing_id
  AND   GROT.language           = 'JA'
  AND   FLV01.language(+)       = 'JA'
  AND   FLV01.lookup_type(+)    = 'XXCMN_K02'
  AND   FLV01.lookup_code(+)    = GRB.attribute1
  AND   FLV02.language(+)       = 'JA'
  AND   FLV02.lookup_type(+)    = 'XXCMN_K07'
  AND   FLV02.lookup_code(+)    = GRB.attribute3
  AND   XIMV.item_id(+)         = GRVR.item_id
  AND   XPCV.item_id(+)         = GRVR.item_id
  AND   XICV.item_id(+)         = GRVR.item_id
  AND   XCCV.item_id(+)         = GRVR.item_id
  AND   GRB.created_by          = FU_CB.user_id(+)
  AND   GRB.last_updated_by     = FU_LU.user_id(+)
  AND   GRB.last_update_login   = FL_LL.login_id(+)
  AND   FL_LL.user_id           = FU_LL.user_id(+)
/
COMMENT ON TABLE APPS.XXSKY_レシピ_基本_V IS 'SKYLINK用レシピマスタ（基本）VIEW'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.レシピ番号                     IS 'レシピ番号'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.レシピ名称                     IS 'レシピ名称'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.レシピ摘要                     IS 'レシピ摘要'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.バージョン                     IS 'バージョン'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.削除フラグ                     IS '削除フラグ'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.削除フラグ名                   IS '削除フラグ名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.ステータス                     IS 'ステータス'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.ステータス名                   IS 'ステータス名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.所有者組織コード               IS '所有者組織コード'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.所有者組織名                   IS '所有者組織名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.作成組織コード                 IS '作成組織コード'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.作成組織名                     IS '作成組織名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.フォーミュラ番号               IS 'フォーミュラ番号'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.フォーミュラ名称               IS 'フォーミュラ名称'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.フォーミュラ名称２             IS 'フォーミュラ名称２'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.フォーミュラ摘要               IS 'フォーミュラ摘要'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.フォーミュラ摘要２             IS 'フォーミュラ摘要２'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.工順番号                       IS '工順番号'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.工順名                         IS '工順名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.調達区分                       IS '調達区分'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.調達区分名                     IS '調達区分名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.包装難度                       IS '包装難度'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.管理区分                       IS '管理区分'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.管理区分名                     IS '管理区分名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.品目コード                     IS '品目コード'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.品目名                         IS '品目名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.品目略称                       IS '品目略称'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.商品区分                       IS '商品区分'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.商品区分名                     IS '商品区分名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.品目区分                       IS '品目区分'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.品目区分名                     IS '品目区分名'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.群コード                       IS '群コード'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.レシピ使用                     IS 'レシピ使用'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.妥当性ルール日付_自            IS '妥当性ルール日付_自'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.妥当性ルール日付_至            IS '妥当性ルール日付_至'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.最小数量                       IS '最小数量'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.最大数量                       IS '最大数量'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.標準数量                       IS '標準数量'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.単位                           IS '単位'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.作成者                         IS '作成者'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.作成日                         IS '作成日'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.最終更新者                     IS '最終更新者'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.最終更新日                     IS '最終更新日'
/
COMMENT ON COLUMN APPS.XXSKY_レシピ_基本_V.最終更新ログイン               IS '最終更新ログイン'
/
